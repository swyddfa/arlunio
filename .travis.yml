language: python

stages:
    - linting
    - test

before_install:
    - "pip install poetry"

install:
    - poetry install

script:
    - poetry run pytest --cov=stylo -q

jobs:
    include:
        - python: 3.5
        - python: 3.6
        - python: 3.7
          dist: xenial

        - stage: linting
          python: 3.6

          install:
              - "pip install black flake8"
          script:
              - black --check stylo
              - black --check tests
              - flake8 stylo/
              - flake8 tests/

notifications:
    webhooks:
        urls:
        - https://webhooks.gitter.im/e/4bfa4fbff35ebee0a9d2
