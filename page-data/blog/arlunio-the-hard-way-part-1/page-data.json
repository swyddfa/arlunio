{"componentChunkName":"component---src-templates-post-js","path":"/blog/arlunio-the-hard-way-part-1","webpackCompilationHash":"1c1da4421106f7099d0f","result":{"data":{"markdownRemark":{"html":"<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/013e28e19af642e6a0d70ef85760219b/a987b/circle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAuUlEQVQoz4WRwQ3DIAxF3YrMkFPvubMRA7BEhsg63DoFNzZIlUug7ZctWWlN2n+wvj9+MiH0MnqyYB6sY/IlsiRqKSWEcGPBoNWjU1iO13X13hPRlQWDFqHlP+B931GXZQEwDMOFBYMWoQ704VoraowR0845YolBqAO/Ns/zLJsFFoPwz+bWGmrOeRxHAHJtGLQIdeD0teU4pTRNk8AwaC3ZgfVJt227s2C6/6kP29EueQrrJ9irHvUGRpsX1f0tH38AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A circle\"\n        title=\"A circle\"\n        src=\"/static/013e28e19af642e6a0d70ef85760219b/dbb61/circle.png\"\n        srcset=\"/static/013e28e19af642e6a0d70ef85760219b/19bd1/circle.png 163w,\n/static/013e28e19af642e6a0d70ef85760219b/d3bcb/circle.png 325w,\n/static/013e28e19af642e6a0d70ef85760219b/dbb61/circle.png 650w,\n/static/013e28e19af642e6a0d70ef85760219b/6b691/circle.png 975w,\n/static/013e28e19af642e6a0d70ef85760219b/91670/circle.png 1300w,\n/static/013e28e19af642e6a0d70ef85760219b/a987b/circle.png 1920w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">A circle</figcaption>\n  </figure></p>\n<p>Arlunio (formerly \"stylo\" which was formerly \"mathemage\") is a Python library\nthat can be used to draw images. At the time of writing to draw a circle and\nsave it as a PNG image (like the one you can see above) all we need is the\nfollowing code.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> arlunio <span class=\"token keyword\">as</span> ar\n\ncircle <span class=\"token operator\">=</span> ar<span class=\"token punctuation\">.</span>S<span class=\"token punctuation\">.</span>Circle<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nimage <span class=\"token operator\">=</span> circle<span class=\"token punctuation\">(</span><span class=\"token number\">1920</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1080</span><span class=\"token punctuation\">)</span>\nimage<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"circle.png\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>But what is really going on here?</p>\n<p>That is what we will aim to cover over the next few blog posts where we break\ndown how <code class=\"language-text\">arlunio</code> goes from code to pixels. This first post deals with how\nimage data is represented in Python.</p>\n<h2 id=\"image-data\"><a href=\"#image-data\" aria-label=\"image data permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Image Data</h2>\n<p>There are many ways to represent image data, some will be more or less useful\ndepending on your use case. The representation that seems to have worked well\nfor <code class=\"language-text\">arlunio</code> so far has been to use a <a href=\"https://www.numpy.org/\">NumPy</a> array.</p>\n<p>You can think of NumPy arrays as lists but with a <em>lot</em> more functionality! If\nwe wanted to represent a black and white image in Python we could use a 2D NumPy\narray of numbers where a <code class=\"language-text\">1</code> represents a white pixel and a <code class=\"language-text\">0</code> represents a\nblack pixel. Then a <code class=\"language-text\">2x2</code> pixel checker board could be represented by the\nfollowing</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels\narray<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n       <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We can check to see which colour a particular pixel is by giving it's index to\nthe array.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">0</span>\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">1</span></code></pre></div>\n<p>We can also check the dimensions of the image by looking at the <code class=\"language-text\">shape</code>\nattribute</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels<span class=\"token punctuation\">.</span>shape\n<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"adding-colour\"><a href=\"#adding-colour\" aria-label=\"adding colour permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding Colour</h2>\n<p>However we will typically want to use more colours than just black and white so\nwe need a better representation of the colour value for each pixel. If you do\nany reading on the subject you will quickly discover that colour is <strong>hard</strong> and\nthere are <em>many</em> different formats and representations of it. This means that\nthere is no right answer here, just better or worse ones depending on the\nsituation.</p>\n<p>For now we will use a representation that is sometimes referred to as <a href=\"https://en.wikipedia.org/wiki/Color_depth#True_color_(24-bit)\">\"True\nColor\"</a> where instead of storing a single number at each pixel we\nstore an array of 3 numbers. Each number can be between 0 and 255 and will\nrepresent the intensity of Red, Green and Blue in that pixel which combines to\nform the colour you see in the final image.</p>\n<p>Using this representation for colour, a <code class=\"language-text\">2x2</code> pixel checker board would look\nlike the following.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> black <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> white <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>white<span class=\"token punctuation\">,</span> black<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>black<span class=\"token punctuation\">,</span> white<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels\narray<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span>  <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>  <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>   <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>uint8<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Notice that we're telling NumPy that the value of each colour value is capped at\n<code class=\"language-text\">255</code> by setting the data type to be <code class=\"language-text\">np.uint8</code> when creating the array. This\nbecomes important when it comes to saving our image to disk. For more\ninformation on data types check out NumPy's <a href=\"https://docs.scipy.org/doc/numpy/user/basics.types.html\">documentation</a> on the\nsubject. Also notice that when we check the dimensions of our image we now are\ndealing with a 3D NumPy array</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> pixels<span class=\"token punctuation\">.</span>shape\n<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Where the first two numbers are the <code class=\"language-text\">height</code> and the <code class=\"language-text\">width</code> of the image (in\nthat order!) and the final number represents the number of <a href=\"https://en.wikipedia.org/wiki/Channel_(digital_image)#RGB_Images\">colour\nchannels</a> in the image.</p>\n<h2 id=\"creating-a-png\"><a href=\"#creating-a-png\" aria-label=\"creating a png permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a PNG</h2>\n<p>Currently we're able to represent the raw data that makes up an image using our\nNumPy arrays, however we want to be able to see it! One such method would be to\nsave it as a PNG image file, that way we can do what we like with our image\nafterwards.</p>\n<p>To do this we will make use of the <a href=\"https://python-pillow.org/\">Pillow</a> library which can take our\nraw image data and save it to file for us. In particular we can use the\n<a href=\"https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.frombuffer\">frombuffer()</a> method to create an instance of Pillow's <code class=\"language-text\">Image</code>\nobject from our NumPy array. If I'm honest I don't understand every argument we\ngive to this function but following the example in the documentation it seems to\nwork well enough.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">import</span> PIL<span class=\"token punctuation\">.</span>Image\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> height<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> pixels<span class=\"token punctuation\">.</span>shape\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> image <span class=\"token operator\">=</span> PIL<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">.</span>frombuffer<span class=\"token punctuation\">(</span><span class=\"token string\">\"RGB\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> pixels<span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"RGB\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then with the image created it's easy enough to save it to disk.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"checkers.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"wb\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"worked-example\"><a href=\"#worked-example\" aria-label=\"worked example permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Worked Example</h2>\n<p>To help better illustrate how images are constructed and saved in this way we\nwill work through creating our own artwork in a style inspired by some of the\nwork of <a href=\"https://en.wikipedia.org/wiki/Piet_Mondrian\">Piet Mondrian</a> such as his piece titled <a href=\"https://en.wikipedia.org/wiki/Piet_Mondrian#/media/File:Tableau_I,_by_Piet_Mondriaan.jpg\">Tableau\nI</a>. I encourage you to try this out yourself and experiment around with\nthe code!</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 8px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/52aff1e994db15e1cf5d0bff0aa4bc7e/ccfbf/mondrian.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAABX0lEQVQ4y92SsW6CUBiFj8rFJqYpQ4eu3UxQvOBSF1NcXfoAPgBuGGpk0KRpamKfBWc0FWlSeRD6BDhZXaR/Ceko2LFfzkTy5Rz+XMQJrusris4YTBNRhDjOFfwPeTDAdnu+XK/rogjbxvH4V3k4xH5/prxc+s1mp1BAtwvHQRDA8+C6GUnl9fq93e4AKJchy9A0cA5FyUgq+76v6/dIEIRLUZQYo1ydTiqvVm+t1h2Z1So3jJFtv1rWi2k+nU4qLxZuo9EQBMEwjDD8pC+73VcUbU/nt3mlKIooipPJJM5NKm82G1VVSR6Px2fIxzjeHw6O48iyzBjr9/thGCazd1EWGM1mj9PpQ693fXNTLBZVzsm3bduyLDMLiJLEJEmoVAqlEl2bfOqn/SwHUAEO3AIXAPnUL9dqmqZxzpUs8AGsgefEp37a78znQRB4nudmgZ/nnfjUT/vp/+l+Oa/9DXztk/ydmdrnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Mondrian Inspired Artwork\"\n        title=\"Mondrian Inspired Artwork\"\n        src=\"/static/52aff1e994db15e1cf5d0bff0aa4bc7e/ccfbf/mondrian.png\"\n        srcset=\"/static/52aff1e994db15e1cf5d0bff0aa4bc7e/ccfbf/mondrian.png 8w\"\n        sizes=\"(max-width: 8px) 100vw, 8px\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Mondrian Inspired Artwork</figcaption>\n  </figure></p>\n<p>We start off by creating a blank <code class=\"language-text\">8x8</code> image using the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.full.html\">np.full()</a>\nfunction that can initialise an array of the given size with our desired\nbackground colour</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> PIL<span class=\"token punctuation\">.</span>Image\n\nwidth <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\nheight <span class=\"token operator\">=</span> <span class=\"token number\">8</span>\nwhite <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span>\n\npixels <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>full<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> white<span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then we can set the bottom left pixel to red by assigning a new color value to a\nspecific index in our array</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pixels<span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We can colour an entire row by passing an empty <a href=\"https://docs.python.org/3/library/functions.html?highlight=slice#slice\">slice</a> instead of a\nspecific row index</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pixels<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Similarly for columns</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pixels<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Finally rectangular regions can be coloured in by using carefully crafted index\nranges</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pixels<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\npixels<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then once you are happy with the design we can save it as a PNG using the code\nfrom the previous section.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">image <span class=\"token operator\">=</span> PIL<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">.</span>frombuffer<span class=\"token punctuation\">(</span><span class=\"token string\">\"RGB\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> pixels<span class=\"token punctuation\">,</span> <span class=\"token string\">\"raw\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"RGB\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mondrian.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"wb\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"date":"August 10, 2019","path":"/blog/arlunio-the-hard-way-part-1","title":"Arlunio the Hard Way Part 1: Images"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}